{% extends "base/pdf_base.html" %}

{% block title %}Attestation d'assurance MRH - {{ policy.policy_number }}{% endblock %}

{% block extra_css %}
{% include "pdf/assurances/mrh/components/_css_base.html" %}

/* ===== En-tête document ===== */
.document-header {
    background: linear-gradient(135deg, #2680eb 0%, #1c5fb0 100%);
    color: white;
    padding: 30px;
    margin: -1.5cm -1.5cm 25px -1.5cm;
    text-align: center;
}

.document-header h1 {
    color: white;
    font-size: 18pt;
    margin: 0 0 5px 0;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.document-header .subtitle {
    font-size: 14pt;
    font-weight: 400;
    opacity: 0.95;
}

.document-header .reference-badge {
    background-color: rgba(255, 255, 255, 0.2);
    padding: 8px 20px;
    border-radius: 20px;
    display: inline-block;
    margin-top: 15px;
    font-size: 11pt;
    font-weight: 500;
}

/* ===== Badge validité ===== */
.validity-section {
    text-align: center;
    margin-bottom: 25px;
}

.validity-badge {
    background-color: var(--hestia-primary);
    color: white;
    padding: 8px 20px;
    border-radius: 4px;
    font-weight: 600;
    font-size: 11pt;
    display: inline-block;
}

/* ===== Section box ===== */
.section-box {
    border: 2px solid var(--hestia-primary);
    border-radius: 8px;
    margin-bottom: 20px;
    overflow: hidden;
}

.section-header {
    background: var(--hestia-primary);
    color: white;
    padding: 10px 15px;
    font-size: 12pt;
    font-weight: 600;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.section-content {
    padding: 20px;
    background: white;
}

/* ===== Info rows ===== */
.info-row {
    margin-bottom: 12px;
    font-size: 10pt;
}

.info-row::after {
    content: "";
    display: table;
    clear: both;
}

.info-label {
    color: var(--hestia-text-light);
    width: 180px;
    float: left;
    font-weight: 500;
}

.info-value {
    color: var(--hestia-text);
    font-weight: 600;
    margin-left: 185px;
}

/* ===== Certification ===== */
.certification-text {
    font-size: 10pt;
    color: var(--hestia-text);
    line-height: 1.6;
    text-align: justify;
    margin: 20px 0;
}

/* ===== Footer attestation ===== */
.attestation-footer {
    margin-top: 30px;
    font-size: 9pt;
    text-align: center;
    color: var(--hestia-text-light);
    border-top: 1px solid var(--hestia-border);
    padding-top: 15px;
}

.attestation-footer p {
    margin: 0 0 5px 0;
    text-align: center;
}
{% endblock %}

{% block content %}
<!-- ===== EN-TÊTE DOCUMENT ===== -->
<div class="document-header">
    <h1>Attestation d'Assurance</h1>
    <div class="subtitle">Multirisque Habitation Locataire</div>
    <div class="reference-badge">Police {{ policy.policy_number }}</div>
</div>

<!-- ===== VALIDITÉ ===== -->
<div class="validity-section">
    <span class="validity-badge">CONTRAT EN COURS DE VALIDITÉ AU {% now "d/m/Y" %}</span>
</div>

<!-- ===== INFORMATIONS DU CONTRAT ===== -->
<div class="section-box">
    <div class="section-header">Informations du Contrat</div>
    <div class="section-content">
        <div class="info-row">
            <span class="info-label">N° de police :</span>
            <span class="info-value">{{ policy.policy_number }}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Assuré :</span>
            <span class="info-value">{% if locataire %}{{ locataire.firstName }} {{ locataire.lastName }}{% else %}-{% endif %}</span>
        </div>
        <div class="info-row">
            <span class="info-label">Adresse du bien assuré :</span>
            <span class="info-value">
                {% if adresse %}
                    {{ adresse.rue }}, {{ adresse.code_postal }} {{ adresse.ville }}
                {% else %}
                    -
                {% endif %}
            </span>
        </div>
        <div class="info-row">
            <span class="info-label">Date d'effet :</span>
            <span class="info-value">{{ policy.quotation.effective_date|date:"d/m/Y" }}</span>
        </div>
    </div>
</div>

<!-- ===== CERTIFICATION ===== -->
<p class="certification-text">
    Nous certifions que l'assuré désigné ci-dessus bénéficie d'un contrat d'assurance Multirisque Habitation Locataire,
    comprenant notamment la garantie Responsabilité Civile Locative et la garantie Responsabilité Civile Vie Privée,
    conformément aux Conditions Générales référence CG-MRH-I-2024061 et aux Conditions Particulières de son contrat.
</p>

<!-- ===== NOTICE ===== -->
<div class="alert-box">
    <p><strong>Important :</strong> Cette attestation est délivrée pour servir et valoir ce que de droit. Elle ne constitue pas une preuve de paiement des cotisations. Pour toute information complémentaire, contactez Mila Services au 05.19.88.08.88 ou par email à contact@mila.fr</p>
</div>

<!-- ===== FOOTER ===== -->
<div class="attestation-footer">
    <p><strong>Attestation générée le {% now "d/m/Y à H:i" %}</strong></p>
    <p>Contrat distribué par Hestia • Assurance Mila</p>
</div>
{% endblock %}
